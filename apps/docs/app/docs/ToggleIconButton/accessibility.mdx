import { ToggleIconButton, Flex, Box, Text, Callout } from '@kushagradhawan/kookie-ui';
import { Bold, TriangleAlertIcon } from 'lucide-react';
import { CodeBlock } from '../../components/CodeBlock';

# Accessibility

ToggleIconButton accessibility extends Button with specialized requirements for icon-only toggle interactions. It enforces mandatory labeling, provides enhanced tooltip support, and maintains all Button accessibility features.

For comprehensive documentation on shared accessibility features, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Color and Contrast

ToggleIconButton uses the same color and contrast system as Button. For comprehensive documentation on color accessibility and high contrast support, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Keyboard Navigation

ToggleIconButton uses the same keyboard navigation system as Button. For comprehensive documentation on keyboard accessibility, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Screen Reader Support

ToggleIconButton extends Button's screen reader support with mandatory accessibility labeling and specialized toggle state announcements for icon-only content.

### Required Labeling

ToggleIconButton requires either `aria-label` or `aria-labelledby` to provide context for icon-only actions. This ensures screen readers can announce the button's purpose clearly.

<CodeBlock
  preview={
    <Flex gap="3" wrap="wrap">
      <ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={true}>
        <Bold />
      </ToggleIconButton>
      <ToggleIconButton size="3" variant="outline" aria-label="Italic text" pressed={false}>
        <Bold />
      </ToggleIconButton>
    </Flex>
  }
>

```tsx
{/* Required: aria-label for screen readers */}
<ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={true}>
  <Bold />
</ToggleIconButton>

{/* Alternative: aria-labelledby for complex labels */}
<div id="bold-desc">Toggle bold text formatting</div>
<ToggleIconButton size="3" variant="outline" aria-labelledby="bold-desc" pressed={false}>
  <Bold />
</ToggleIconButton>
```

</CodeBlock>

<Callout.Root size="3" variant="surface" color="gray" my="8">
  <Callout.Icon>
    <TriangleAlertIcon />
  </Callout.Icon>
  <Callout.Text>ToggleIconButton requires either aria-label or aria-labelledby. Without proper labeling, screen readers cannot announce the button's purpose.</Callout.Text>
</Callout.Root>

### Toggle State Announcements

ToggleIconButton uses proper ARIA attributes to announce toggle states to screen readers. The `aria-pressed` attribute communicates the current on/off state.

<CodeBlock
  preview={
    <Flex gap="3" wrap="wrap">
      <ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={true}>
        <Bold />
      </ToggleIconButton>
      <ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={false}>
        <Bold />
      </ToggleIconButton>
    </Flex>
  }
>

```tsx
{/* Screen readers announce "Bold text, pressed" */}
<ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={true}>
  <Bold />
</ToggleIconButton>

{/* Screen readers announce "Bold text, not pressed" */}
<ToggleIconButton size="3" variant="solid" aria-label="Bold text" pressed={false}>
  <Bold />
</ToggleIconButton>
```

</CodeBlock>

**Toggle State Communication:**
- **Pressed state:** Screen readers announce "pressed" to indicate the toggle is on
- **Unpressed state:** Screen readers announce "not pressed" to indicate the toggle is off
- **State changes:** Screen readers announce the new state when toggled

## Touch Targets

ToggleIconButton uses the same touch target system as Button but with square aspect ratios. For comprehensive documentation on touch target accessibility, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Motion Preferences

ToggleIconButton uses the same motion preferences system as Button. For comprehensive documentation on motion accessibility, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Enhanced Loading States

ToggleIconButton uses the same enhanced loading states system as Button. For comprehensive documentation on loading state accessibility, see the **[Button Accessibility documentation](../Button/accessibility)**.

## Tooltip Accessibility

ToggleIconButton includes enhanced tooltip accessibility for icon-only toggle interactions. Tooltips provide additional context that complements the required aria-label.

<CodeBlock
  preview={
    <Flex gap="3" wrap="wrap">
      <ToggleIconButton size="3" variant="solid" aria-label="Bold text" tooltip="Bold text" pressed={true}>
        <Bold />
      </ToggleIconButton>
      <ToggleIconButton size="3" variant="outline" aria-label="Italic text" tooltip="Italic text" pressed={false}>
        <Bold />
      </ToggleIconButton>
    </Flex>
  }
>

```tsx
{/* Tooltip provides additional context */}
<ToggleIconButton 
  size="3" 
  variant="solid" 
  aria-label="Bold text"
  tooltip="Bold text"
  pressed={true}
>
  <Bold />
</ToggleIconButton>

{/* Tooltip can provide more detailed information */}
<ToggleIconButton 
  size="3" 
  variant="outline" 
  aria-label="Italic text"
  tooltip="Toggle italic text formatting"
  pressed={false}
>
  <Bold />
</ToggleIconButton>
```

</CodeBlock>

**Tooltip Best Practices:**
- Use tooltips to provide additional context beyond the aria-label
- Keep tooltip text concise but descriptive
- Consider using tooltips for complex actions that need explanation
- Tooltips should complement, not replace, proper aria-labeling

## Testing Guidelines

ToggleIconButton uses the same testing guidelines as Button with additional focus on icon-specific and toggle-specific accessibility. For comprehensive documentation on accessibility testing, see the **[Button Accessibility documentation](../Button/accessibility)**.

### Icon and Toggle-Specific Testing

When testing ToggleIconButton accessibility, ensure:

1. **Mandatory Labeling:** Every ToggleIconButton has either `aria-label` or `aria-labelledby`
2. **Toggle State Announcements:** Screen readers announce "pressed" and "not pressed" states correctly
3. **State Changes:** Screen readers announce state changes when toggled
4. **ARIA Attributes:** aria-pressed attribute is properly managed
5. **Icon Recognition:** Icons are recognizable and their meaning is clear
6. **Context Clarity:** The button's purpose is clear from its context and labeling 